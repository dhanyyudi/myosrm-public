# OSRM Inspector - Public Edition

A modern, glassmorphism-styled web interface for OSRM (Open Source Routing Machine) with **configurable backend support**.

## Features

- ğŸ—ºï¸ **Interactive Map** - Powered by MapLibre GL with CartoDB basemaps
- ğŸš› **Vehicle Profiles** - Support for trucks, vans, buses with custom routing
- â° **Time-Dependent Routing** - Traffic-aware routing with historical speed data
- ğŸ“ **Multi-Waypoint** - Drag-and-drop waypoint management
- ğŸ¨ **Glassmorphism UI** - Modern translucent interface
- ğŸ”§ **Configurable Backend** - Connect to any OSRM instance (local or remote)
- ğŸ“Š **Debug Tools** - Visualize nodes, edges, and speed data
- ğŸ“¤ **Export** - Save waypoints and way IDs as CSV

## Quick Start

```bash
# Serve with any static server
python3 -m http.server 8080

# Or with nginx
nginx -c /path/to/nginx.conf
```

Open http://localhost:8080

## Backend Configuration

Click the **server icon** (âš™ï¸) in the sidebar header to configure your OSRM backend:

| Backend | URL | Use Case | TD Support |
|---------|-----|----------|------------|
| **Local (Podman)** | `/api` | Your local OSRM instance | âœ… Yes |
| **Public Demo** | `https://router.project-osrm.org` | Testing/demo (rate limited) | âŒ No |
| **Custom** | Any URL | Your own OSRM server | Depends on server |

### Backend Requirements

- **Local backends**: No CORS configuration needed
- **Remote backends**: Must have CORS enabled
- **OSRM version**: Should support `/route/v1/{profile}/{coordinates}` endpoint

### Time-Dependent Routing

Time-dependent (traffic-aware) routing **only works with local backends** that have TD support compiled in. The public OSRM demo does not support TD routing.

When using public backends, the TD controls will be disabled with an info message.

## Configuration

The frontend stores backend settings in `localStorage`. Default configuration is in `config.js`:

```javascript
osrmBackendUrl: "/api",  // Default backend
```

## Basemap Options

Edit `map.js` to switch basemaps:

```javascript
// CartoDB Voyager (default) - colorful, modern
const baseMapUrl = "https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png";

// CartoDB Positron - light gray, minimal
const baseMapUrl = "https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png";

// CartoDB Dark - dark theme
const baseMapUrl = "https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png";
```

All basemaps are **free** and use **OSM data**.

## Deploying to Production

### Static Hosting (GitHub Pages, Netlify, Vercel)

```bash
# Build (no build step needed - vanilla JS)
# Just deploy the files

# GitHub Pages
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/username/osrm-inspector-public.git
git push -u origin main
```

### Docker

```dockerfile
FROM nginx:alpine
COPY . /usr/share/nginx/html
EXPOSE 80
```

### Environment Variables

Create a `.env` file for default backend URL:

```
OSRM_BACKEND_URL=https://your-osrm-server.com
```

## API Compatibility

This frontend works with any OSRM backend that supports:

- `GET /route/v1/{profile}/{coordinates}` - Route calculation
- `GET /nearest/v1/{profile}/{coordinates}` - Nearest point
- Query params: `overview`, `geometries`, `steps`, `annotations`

## File Structure

```
myosrm-public/
â”œâ”€â”€ index.html              # Main HTML
â”œâ”€â”€ app.js                  # Application entry
â”œâ”€â”€ config.js               # Configuration (colors, defaults)
â”œâ”€â”€ backend-settings.js     # Backend configuration UI
â”œâ”€â”€ map.js                  # MapLibre map initialization
â”œâ”€â”€ routing.js              # OSRM API communication
â”œâ”€â”€ debug.js                # Debug visualization tools
â”œâ”€â”€ routing-area.js         # Service area functionality
â”œâ”€â”€ utils.js                # Utility functions
â”œâ”€â”€ sweetalert-helpers.js   # Alert dialogs
â”œâ”€â”€ styles.css              # Glassmorphism theme
â””â”€â”€ runtime-config.json     # Auto-generated by backend
```

## Browser Support

- Chrome/Edge (latest)
- Firefox (latest)
- Safari (latest)

## Security Notes

- No API keys or credentials in source code
- Backend URL stored in user's localStorage only
- CORS required for cross-origin backend connections

## License

MIT License - Free for personal and commercial use
